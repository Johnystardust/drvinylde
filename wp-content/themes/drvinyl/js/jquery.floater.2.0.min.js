(function($){$.fn.dcFloater=function(options){var defaults={classWrapper:'dc-floater',classContent:'dc-floater-content',width:41,idWrapper:'dc-floater-'+$(this).index(),location:'top',align:'left',offsetLocation:10,offsetAlign:10,speedFloat:1500,speedContent:600,tabText:'Click',event:'click',classTab:'tab',classOpen:'dc-open',classClose:'dc-close',classToggle:'dc-toggle',autoClose:true,loadOpen:false,tabClose:true,easing:'easeOutQuint',onLoad:function(){},onOpen:function(){},onClose:function(){},onFloat:function(){}};var options=$.extend(defaults,options);return this.each(function(options){var floatHtml=$(this).html();var floatTab='<div class="'+defaults.classTab+'"><span>'+defaults.tabText+'</span></div>';$(this).hide();var idWrapper=defaults.idWrapper;if(defaults.location=='bottom'){var objHtml='<div id="'+idWrapper+'" class="'+defaults.classWrapper+' '+defaults.location+' '+defaults.align+'"><div class="'+defaults.classContent+'">'+floatHtml+'</div>'+floatTab+'</div>'}else{var objHtml='<div id="'+idWrapper+'" class="'+defaults.classWrapper+' '+defaults.align+'">'+floatTab+'<div class="'+defaults.classContent+'">'+floatHtml+'</div></div>'}$('body').append(objHtml);var $floater=$('#'+idWrapper);var $tab=$('.'+defaults.classTab,$floater);var $content=$('.'+defaults.classContent,$floater);var linkOpen=$('.'+defaults.classOpen);var linkClose=$('.'+defaults.classClose);var linkToggle=$('.'+defaults.classToggle);$floater.css({width:defaults.width+'px',position:'absolute',zIndex:10000});var h_c=$content.outerHeight(true);var h_f=$floater.outerHeight();var h_t=$tab.outerHeight();if(defaults.tabClose==true){$content.hide()}floaterSetup($floater);var start=$('#'+idWrapper).position().top;floatObj();$(window).scroll(function(){floatObj(1)});if(defaults.loadOpen==true){floatOpen()}if(defaults.tabClose==true){if(defaults.event=='hover'){var config={sensitivity:2,interval:100,over:floatOpen,timeout:400,out:floatClose};$floater.hoverIntent(config)}if(defaults.event=='click'){$tab.click(function(e){if($floater.hasClass('active')){floatClose()}else{floatOpen()}e.preventDefault()})}$(linkOpen).click(function(e){if($floater.not('active')){floatOpen()}e.preventDefault()});$(linkClose).click(function(e){if($floater.hasClass('active')){floatClose()}e.preventDefault()});$(linkToggle).click(function(e){if($floater.hasClass('active')){floatClose()}else{floatOpen()}e.preventDefault()});if(defaults.autoClose==true){$('body').mouseup(function(e){if($floater.hasClass('active')){if(!$(e.target).parents('#'+defaults.idWrapper+'.'+defaults.classWrapper).length){floatClose()}}})}}else{$floater.addClass('active')}function floatOpen(){$('.'+defaults.classWrapper).css({zIndex:10000});$floater.css({zIndex:10001});var h_fpx=h_c+'px';if(defaults.location=='bottom'){$content.animate({marginTop:'-'+h_fpx},defaults.speed).slideDown(defaults.speedContent)}else{$content.slideDown(defaults.speedContent)}$floater.addClass('active');defaults.onOpen.call(this)}function floatClose(){$content.slideUp(defaults.speedContent,function(){$floater.removeClass('active')});defaults.onClose.call(this)}function floatObj(i){var scroll=$(document).scrollTop();var moveTo=start+scroll;var h_b=$('body').height();var h_f=$floater.height();var h_c=$content.height();if(h_b<h_f+h_c){$floater.css("top",start)}else{$floater.stop().animate({top:moveTo},defaults.speedFloat,defaults.easing)}if(i==1){defaults.onFloat.call(this)}}function floaterSetup(obj){var location=defaults.location;var align=defaults.align;var offsetL=defaults.offsetLocation;var offsetA=defaults.offsetAlign;if(location=='top'){$(obj).css({top:offsetL})}else{$(obj).css({bottom:offsetL})}if(align=='left'){$(obj).css({left:offsetA})}else{$(obj).css({right:offsetA})}defaults.onLoad.call(this)}})}})(jQuery);